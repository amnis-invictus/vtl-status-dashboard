<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          crossorigin="anonymous" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3">
    <title>VTL Status Dashboard</title>
  </head>
  <body class="container">
    <h1>VTL Status Dashboard</h1>

    <h2>Internet</h2>
    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Link</th>
          <th>IP</th>
          <th>Internet</th>
          <th>Last update</th>
        </tr>
      </thead>
      <tbody>
        <% internet.each do |item| %>
          <tr>
            <td><%= item['id'] %></td>

            <td class="<%= item['link'] ? 'text-success' : 'text-danger' %>">
              <%= item['link'] ? 'UP' : 'DOWN' %>
            </td>

            <td class="<%= item['ip_state'] ? 'text-success' : 'text-danger' %>">
              <%= item['ip'] %>
            </td>

            <td class="<%= item['internet'] ? 'text-success' : 'text-danger' %>">
              <%= item['internet'] ? 'YES' : 'NO' %>
            </td>

            <td><%= item['last_update'] %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <h2>PMG17</h2>
    <table class="table">
      <thead>
        <tr>
          <th>Host</th>
          <th>DNS</th>
          <th>Ping</th>
          <th>Traceroute</th>
          <th>Web</th>
          <th>Last update</th>
        </tr>
      </thead>
      <tbody>
        <% pmg17.each do |item| %>
          <tr>
            <td><%= item['id'] %></td>

            <% if item['dns'].nil? %>
              <td></td>
            <% else %>
              <td class="<%= item['dns'] ? 'text-success' : 'text-danger' %>">
                <%= item['dns'] ? 'Resolved' : 'Not resolved' %>
              </td>
            <% end %>

            <td class="<%= item['ping'] ? 'text-success' : 'text-danger' %>">
              <%= item['ping'] ? 'UP' : 'DOWN' %>
            </td>

            <td class="<%= item['traceroute'] ? 'text-success' : 'text-danger' %>">
              <%= item['traceroute'] ? 'UP' : 'DOWN' %>
            </td>

            <% if item['web'].nil? %>
              <td></td>
            <% else %>
              <td class="<%= item['web'] ? 'text-success' : 'text-danger' %>">
                <%= item['web'] ? 'UP' : 'DOWN' %>
              </td>
            <% end %>

            <td><%= item['last_update'] %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <h2>Lan</h2>
    <table class="table">
      <thead>
        <tr>
          <th>IP</th>
          <th>DNS</th>
          <th>Ping</th>
          <th>Web</th>
          <th>Last update</th>
        </tr>
      </thead>
      <tbody>
        <% lan.each do |item| %>
          <tr>
            <td><%= item['id'] %></td>

            <% if item['dns'].nil? %>
              <td></td>
            <% else %>
              <td class="<%= item['dns_state'] ? 'text-success' : 'text-danger' %>">
                <%= item['dns'] %>
              </td>
            <% end %>

            <td class="<%= item['ping'] ? 'text-success' : 'text-danger' %>">
              <%= item['ping'] ? 'UP' : 'DOWN' %>
            </td>

            <% if item['web'].nil? %>
              <td></td>
            <% else %>
              <td class="<%= item['web'] ? 'text-success' : 'text-danger' %>">
                <%= item['web'] ? 'UP' : 'DOWN' %>
              </td>
            <% end %>

            <td><%= item['last_update'] %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </body>
</html>
